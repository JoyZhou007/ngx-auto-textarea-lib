{"version":3,"file":"ngx-auto-textarea.umd.js.map","sources":["ng://ngx-auto-textarea/lib/ngx-auto-textarea.service.ts","ng://ngx-auto-textarea/lib/type.service.ts","ng://ngx-auto-textarea/lib/ngx-auto-textarea.component.ts","ng://ngx-auto-textarea/lib/ngx-auto-textarea.directive.ts","ng://ngx-auto-textarea/lib/ngx-auto-textarea.module.ts"],"sourcesContent":["import {ElementRef, HostListener, Injectable, Input} from '@angular/core';\nimport {TypeService} from './type.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxAutoTextareaService {\n\n\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TypeService {\n\n  constructor() { }\n\n\n\n\n\n\n  /**\n   * è·åä¸­è±ææ··åå­ç¬¦ä¸²å®ä¹é¿åº¦\n   */\n  public getStringLocaleLen(text: any) {\n    if (!text) {\n      return 0;\n    }\n    const cnCharLen = 3;\n    let textLen: number = 0;\n    // è±æ\n    const regExpEn = /[a-z|A-Z|0-9]|[`|!|@|#|$|%|^|&|*|(|)|\\-|_|+|{|}|<|>|?|,|.|/|[|'|;|:|\"|\\\\]/gi;\n    // æ¢è¡\n    const regExpSpace: any = /\\s/g;\n    for (let i = 0; i < text.length; i++) {\n      regExpEn.lastIndex = 0;\n      if (regExpEn.test(text[i]) || regExpSpace.test(text[i])) {\n        textLen += 1;\n      } else {\n        textLen += cnCharLen;\n      }\n    }\n    return textLen;\n  }\n\n  /**\n   * æç§ä¸­è±ææ··åé¿åº¦æªåå­ç¬¦ä¸²\n   */\n  localeSubString(text: any, start: number, maxLen: number) {\n    if (!text) {\n      return '';\n    }\n    if (start > text.length) {\n      return '';\n    }\n    let cnCharLen = 3;\n    let textLen: number = 0;\n    let returnStr: string = '';\n    // è±æ\n    let regExpEn = /[a-z|A-Z|0-9]|[`|!|@|#|$|%|^|&|*|(|)|\\-|_|+|{|}|<|>|?|,|.|/|[|'|;|:|\"|\\\\]/gi;\n    // æ¢è¡\n    let regExpSpace: any = /\\s/g;\n    for (let i = start; i < text.length; i++) {\n      regExpEn.lastIndex = 0;\n      if (regExpEn.test(text[i]) || regExpSpace.test(text[i])) {\n        textLen += 1;\n      } else {\n        textLen += cnCharLen;\n      }\n      if (textLen > maxLen) {\n        break;\n      } else {\n        returnStr += text[i];\n      }\n    }\n    return returnStr;\n  }\n\n\n}\n","import {Component, Input, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'lib-ngx-auto-textarea',\n  template: `\n    <textarea class=\"ipt-btn\" type=\"text\" #ipt\n              libNgxAutoTextarea [appMaxLength]=\"maxLength\"\n    > </textarea>\n  `,\n  styles: [`.ipt-btn{width:100%;height:10px;border:1px solid #4080cf;border-radius:5px;padding:5px 10px;line-height:20px;background-color:#fff;box-sizing:border-box}`]\n})\nexport class NgxAutoTextareaComponent implements OnInit {\n  @Input() maxLength: number = 500;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { TypeService } from './type.service';\n\n@Directive({\n  selector: '[libNgxAutoTextarea]'\n})\nexport class NgxAutoTextareaDirective {\n\n  @Input() appMaxLength: number;\n  // public baseRem: number = 37.5;\n\n  constructor(public element: ElementRef,\n    public typeService: TypeService) {\n    this.adjustHeight();\n  }\n\n  @HostListener('input', ['$event.target'])\n  onInput(textArea: HTMLTextAreaElement): void {\n    this.adjustHeight();\n  }\n\n  @HostListener('blur', ['$event.target'])\n  blur(textArea: HTMLTextAreaElement): void {\n    console.log('çå¬å¤±å»ç¦ç¹');\n    this.adjustHeight();\n  }\n\n  @HostListener('focus', ['$event.target'])\n  focus(textArea: HTMLTextAreaElement): void {\n    console.log('çå¬ç¦ç¹');\n    this.adjustHeight();\n  }\n\n  public adjustHeight(minHeight?: number) {\n    if (!minHeight) {\n      minHeight = 10;\n    }\n    let el = this.element.nativeElement;\n    // é²æ­¢å­æ°è¶åºé¿åº¦\n    if (this.appMaxLength) {\n      let countLen = this.typeService.getStringLocaleLen(el.value);\n      if (countLen > this.appMaxLength) {\n        this.element.nativeElement.value = this.typeService.localeSubString(el.value, 0, this.appMaxLength);\n      }\n    }\n    // compute the height difference which is caused by border and outline\n    // let outerHeight = parseInt(window.getComputedStyle(el).height, 10);\n    let diff = el.offsetHeight - el.clientHeight;\n    // set the height to 0 in case of it has to be shrinked\n    el.style.height = 0;\n    // set the correct height\n    // el.scrollHeight is the full height of the content, not just the visible part\n    // el.style.height = Math.max(minHeight, el.scrollHeight + diff) / this.baseRem + 'rem';\n    console.log('sdasd', el.scrollHeight + diff)\n    el.style.height = Math.max(minHeight, el.scrollHeight + diff) + 'px';\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxAutoTextareaComponent } from './ngx-auto-textarea.component';\nimport { NgxAutoTextareaDirective } from './ngx-auto-textarea.directive';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [NgxAutoTextareaComponent, NgxAutoTextareaDirective],\n  exports: [NgxAutoTextareaComponent, NgxAutoTextareaDirective]\n})\nexport class NgxAutoTextareaModule { }\n"],"names":["Injectable","Component","Input","Directive","ElementRef","HostListener","NgModule"],"mappings":"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"}
